<div class="create-account-card" [formGroup]="accountForm">
  <h5 class="title">Create Billing Account</h5>

  <div class="form-body">
    <!-- SOL -->
    <div class="left-side">
      <label>Account Name *</label>
      <input formControlName="accountName" class="input" placeholder="Enter account name" />
      <div
        *ngIf="accountForm.get('accountName')?.touched && accountForm.get('accountName')?.invalid"
        class="error"
      >
        Name is required (min 2 chars)
      </div>
    </div>

    <!-- SAÄž -->
    <div class="right-side">
      <h6>Address Info</h6>

      <!-- eÄŸer tempAddress varsa -->
      <div *ngIf="tempAddress()">
        <div class="address-item">
          <div class="info">
            <p>
              <strong>{{ tempAddress()?.street }}</strong> No:
              {{ tempAddress()?.houseNumber }}
            </p>
            <p>{{ tempAddress()?.description }}</p>
          </div>
          <div class="actions">
            <button class="btn-outline" type="button" (click)="deleteAddress()">ðŸ—‘ Delete</button>
          </div>
        </div>
      </div>

      <ng-template [ngIf]="!tempAddress()">
        <p class="no-address">No address added yet.</p>
      </ng-template>

      <button
        class="btn-add"
        type="button"
        (click)="openModalForNew()"
        [disabled]="tempAddress() !== null"
      >
        + Add New Address
      </button>
    </div>
  </div>

  <div class="actions-bottom">
    <button class="btn-cancel" type="button" (click)="onCancel()">Cancel</button>
    <button class="btn-create" type="button" (click)="onSubmit()">Create</button>
  </div>

  <!-- MODAL -->
  <div class="modal-backdrop" *ngIf="showModal()">
    <div class="modal-content" [formGroup]="addressForm">
      <button class="close-btn" type="button" (click)="showModal.set(false)">âœ•</button>
      <h6>Add Address</h6>

      <div class="row">
        <div class="col">
          <label>City *</label>
          <select formControlName="cityId" (change)="onCityChange()">
            <option value="">Select</option>
            <option *ngFor="let city of cities()" [value]="city.id">{{ city.name }}</option>
          </select>
        </div>
        <div class="col">
          <label>District *</label>
          <select formControlName="districtId">
            <option value="">Select</option>
            <option *ngFor="let dist of districts()" [value]="dist.id">{{ dist.name }}</option>
          </select>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <label>Street *</label>
          <input formControlName="street" placeholder="Enter street" />
        </div>
        <div class="col">
          <label>House Number *</label>
          <input formControlName="houseNumber" placeholder="Enter house no" />
        </div>
      </div>

      <label>Description *</label>
      <textarea formControlName="description" placeholder="Enter address description"></textarea>

      <div class="modal-actions">
        <button type="button" class="btn-cancel" (click)="showModal.set(false)">Cancel</button>
        <button type="button" class="btn-save" (click)="saveAddress()" [disabled]="isLoading()">
          {{ isLoading() ? 'Saving...' : 'Save' }}
        </button>
      </div>
    </div>
  </div>
</div>
